\newfontfamily\russianfont[Script=Cyrillic,Ligatures=TeX]{Times New Roman}
\newfontfamily\russianfonttt[Ligatures=TeX]{lmmono10-regular.otf}
\newfontfamily\russianfontsf[Ligatures=TeX]{lmsans10-regular.otf}
\newfontfamily\churchslavonicfont[Script=Cyrillic,Ligatures=TeX,HyphenChar="005F]{PonomarUnicode.otf}

\usepackage{churchslavonic}
\usepackage{hyperref}
\usepackage{xltxtra}
\usepackage{doc}
\usepackage{lettrine}

\def\pkg#1{\textsf{#1}}
\def\cs#1{\texttt{\textbackslash #1}}
%
\cuDefineDateFormat{long}{%
  \cuDayName{\cuDOW},
  \cuNum{\cuDAY}_гѡ~%
  \cuMonthName{\cuMONTH}~%
  лѣ́та ѿ сотворе́нїѧ мі́ра~\cuNum{\cuYEARAM}%
}
%
\makeatletter
\def\cu@lettrine{\lettrine[lines=3,findent=0pt,nindent=0pt]}
\def\cuLettrine{\cu@tokenizeletter\cu@lettrine}
\renewcommand{\LettrineFontHook}{\cuKinovarColor}
\makeatother

\begin{document}

\begin{EN}
\title{\pkg{churchslavonic} package --- Church Slavonic Typography in \LaTeX}
\author{Aleksandr Andreev and Mike Kroutikov\\version~0.1}
\end{EN}

\begin{RU}
\title{Пакет \pkg{churchslavonic} --- верстка церковнославянских текстов в системе \LaTeX}
\author{Александр Андреев и Михаил Крутиков\\версия~0.1}
\end{RU}

\date{\today}
\maketitle

\begin{EN}
\begin{abstract}
Package \pkg{churchslavonic} provides fonts, hyphenation patterns and supporting macros to typeset
Church Slavonic texts.
\end{abstract}
\end{EN}

\begin{RU}
\begin{abstract}
Пакет \pkg{churchslavonic} позволяет верстать церковнославянские документы. В пакет включены шаблоны переносов,
шрифты и набор необходимых макрокоманд.
\end{abstract}
\end{RU}

\tableofcontents

\begin{EN}
\section*{Introduction}
Church Slavonic (also called Church Slavic, Old Church Slavonic
or Old Slavonic; ISO 639-2 code \texttt{cu}) is a literary language used by
the Slavic peoples; presently it is used as a liturgical language by the
Russian Orthodox Church, other local Orthodox Churches, as well
as various Byzantine-Rite Catholic and Old Ritualist communities.
The package \texttt{churchslavonic} provides fonts, hyphenation
patterns and supporting macros to typeset
Church Slavonic texts in \TeX{}.

The package is designed to support Unicode text encoded in UTF-8.
Texts encoded in legacy codepages (such as HIP and UCS) may be
converted to Unicode using a separate bundle of utilities.
See the \href{http://sci.ponomar.net/}
{Slavonic Computing Initiative website} for more information.
To use the tools in this package, you will need a Unicode-aware \TeX{}
engine such as \XeTeX{} or \LuaTeX{}.
\end{EN}

\begin{RU}
\section*{Введение}
Церковнославянский язык (ISO 639-2 код \texttt{cu}) --
древний литературный язык славянских народов,
который теперь используется в основном как богослужебный язык
в Русской Православной Церкви, других поместных православных
церквях, а также в грекокатолических и старообрядческих общинах.
Пакет \pkg{churchslavonic} позволяет верстать церковнославянские тексты
в системе \TeX{}. В пакет включены шаблоны переносов,
шрифты и набор необходимых макрокоманд.

Данный пакет поддерживает только набор в стандарте Юникод.
Тексты, набранные в устаревших кодировках HIP и UCS,
можно конвертировать в Юникод (точнее -- в UTF-8) с помощью
отдельных утилит, которые можно найти на сайте
\href{http://sci.ponomar.net/}
{Инициативной группы славянской информатики}.
Для того, чтобы использовать возможности этого пакета Вам
понадобится система верстки \TeX{}, поддерживающая Юникод,
например, \XeTeX{} или \LuaTeX{}.
\end{RU}

\begin{EN}
\section{How to use the package}
To use \pkg{churchslavonic} package one needs to include the following declarations into the document
preamble:
\end{EN}

\begin{RU}
\section{Как пользоваться пакетом}
Добавьте следующие определения в преамбулу вашего документа:
\end{RU}

\begin{verbatim}
\usepackage{polyglossia}
\setmainlanguage{churchslavonic} 
\usepackage{churchslavonic}
\end{verbatim}

\begin{EN}
After that, use standard \pkg{polyglossia} commands to control current language.
\end{EN}

\begin{RU}
После чего переключайтесь между языками стандартными средствами пакета \pkg{polyglossia}.
\end{RU}

\begin{EN}
\subsection{Options \texttt{color}, \texttt{gray}, and \texttt{bw}}
These options control what color actually being used for text coloring commands like \cs{cuKinovar}.

\begin{itemize}
\item \texttt{color} this is the default option and it preserves the original color (a shade of red).
\item \texttt{gray} replaces red color with a gray - useful if you are printing on a media that
    does not support colors, but is capable of reproduction shades of gray.
\item \texttt{bw} replaces red color with black (effectively turning off commands like \cs{cuKinovar} and \cs{cuKinovarColor}). Use
    this option to generate document that will be printed in blank-and-white.
\end{itemize}
Example:
\end{EN}

\begin{RU}
\subsection{Опции \texttt{color}, \texttt{gray} и \texttt{bw}}
Опции позволяют отключать цвет раскраски текста в командах типа \cs{cuKinovar}. Полезны для создания версий для печати на
устройствах которые не поддерживают цветности.

\begin{itemize}
\item \texttt{color} эта опция используется по умолчанию и означает что используется нормальный красный цвет.
\item \texttt{gray} заменяет красный цвет серым --- используйте эту опцию если ваше устройство печати не
    поддерживает цветности, но может качественно передавать градации серого цвета.
\item \texttt{bw} отключает всякую раскраску --- используйте для создания черно-белой версии документа.
\end{itemize}
Пример:
\end{RU}

\begin{verbatim}
\usepackage[gray]{churchslavonic}
\end{verbatim}

\begin{EN}
\subsection{Underscore}
Underscore symbol (\texttt{\textunderscore}) is a valid text symbol in Church Slavonic (plays roughly the same role as dash in English). Package
\pkg{churchslavonic} redefines underscore in a way that it can be directly typed in text mode, for example:
\end{EN}
%
\begin{RU}
\subsection{Знак подчеркивания}
Знак подчеркивания (\texttt{\textunderscore}) в церковнославянском языке играет примерно ту же роль что и дефис в русском.
Пакет \pkg{churchslavonic} переопределяет знак подчеркивания так что его можно набирать и в текстовой моде, например:
\end{RU}
%
\begin{center}
\begin{churchslavonic}
\begin{tabular}{l}
Послѣ́дованїе моле́бнагѡ пѣ́нїѧ ст҃ы́мъ мч҃камъ к҃_гѡ вѣ́ка, \\
въ Са́нктъ_Петербꙋ́ржстѣй дꙋхо́внѣй а҆каде́мїи \\
нача́льствовавшимъ, ᲂу҆чи́вшимъ и҆ ᲂу҆чи́вшимсѧ \\
\end{tabular}
\end{churchslavonic}
\end{center}

\begin{EN}
\section{Numbers}

Church Slavonic numbering system is heavily based on the Old Greek one and uses 
letters as digits.
For more information on the matter, see the appropriate section in \cite{UN41}.
\end{EN}

\begin{RU}
\section{Числа}
Способ записи чисел в церковнославянском языке основывается на древнегреческом и в
качестве цифр использует буквы. За подробностями отсылаем интересующегося читателя к
соответствующей главе \cite{UN41}.
\end{RU}

\begin{EN}
\subsection{\cs{cuNum}}
Use this command to typeset a Church Slavonic number.
The command takes a single argument that should expand to a number (register name works too).
\end{EN}

\begin{RU}
\subsection{\cs{cuNum}}
Команда печатает число в церковнослявянской нотации.
Она принимает единственный аргумент. Аргументом может быть текст, командная последовательность, или имя 
целочисленного регистра. Единственное условие --- аргумент должен раскрыться в число.
\end{RU}

\begin{center}
\begin{churchslavonic}
\begin{tabular}{| l | l |}
\hline
\verb+\cuNum{1}+ & \cuNum{1} \\
\verb+\cuNum{12}+ & \cuNum{12} \\
\verb+\cuNum{123}+ & \cuNum{123} \\
\verb+\cuNum{1234}+ & \cuNum{1234} \\
\verb+\cuNum{10345}+ & \cuNum{10345} \\
\verb+\cuNum{12345}+ & \cuNum{12345} \\
\verb+\cuNum{123456}+ & \cuNum{123456} \\
\verb+\cuNum{800456}+ & \cuNum{800456} \\
\verb+\cuNum{1234567}+ & \cuNum{1234567} \\
\verb+\cuNum{1500567}+ & \cuNum{1500567} \\
\verb+\cuNum{12345678}+ & \cuNum{12345678} \\
\verb+\cuNum{123456789}+ & \cuNum{123456789} \\
\hline
\end{tabular}
\end{churchslavonic}
\end{center}


\begin{EN}
\section{Dates}
\end{EN}

\begin{RU}
\section{Даты}
\end{RU}

\begin{center}
\begin{churchslavonic}
\begin{tabular}[]{ | l | l | }
\hline
\verb+\cuDate{2016-4-21}+ & \cuDate{2016-4-21} \\
\verb+\cuJulianDate{2016-4-21}+ & \cuJulianDate{2016-4-21} \\
\verb+\cuDate{\cuToday}+ & \cuDate{\cuToday} \\
\hline
\end{tabular}
\end{churchslavonic}
\end{center}

\begin{EN}
\subsection{\cs{cuDate}}
Command formats the date (according to the current format). Argument is a triplet of numbers \texttt{YYYY-MM-DD} specifying
the date. Output will be something like this: \textchurchslavonic{\cuDate{2016-04-22}}.

Note that \texttt{YYYY-MM-DD} values are not being normalized or interpreted in any way. Thus, it is totally fine to
call \verb+\cuDate{2016-4-32}+ even though April 32 is not a valid date. It will be formatted and printed as April 32. This
makes it possible to use this macro in a phrase like ``date \verb+\cuDate{2016-4-32}+ is not a valid date in any calendar''.

However, if your date format uses \cs{cuDOW} (day of the week) or \cs{cuYEARAM} (year Anno Mundi), the later quantities are computed by
interpreting date as a Gregorian calendar date. Also, if input date is not a valid date, it will be normalized via extrapolation.
For example, April 32nd will be interpreted as May 2nd for the purpose of determining values of the day of the week and year Anno Mundi.

If your format uses \cs{cuDOW} or \cs{cuYEARAM}, and your date is Julian, not Gregorian, you must use \cs{cuJulianDate} to
correctly format days of the week and year Anno Mundi.

The best practice is to always use \cs{cuDate} with Gregorian dates and use \cs{cuJulianDate} with Julian dates regardless
of the current date format. This way you can later on switch date formatting style without worrying about getting wrong output.
\end{EN}

\begin{RU}

\subsection{\cs{cuDate}}
Команда форматирует дату (в соответствии с текущим форматом). Аргумент должен иметь вид \texttt{YYYY-MM-DD}. Результат
может выглядеть примерно так: \textchurchslavonic{\cuDate{2016-04-22}}.

Отметим что значение даты никоем образом не интерпретируется и не нормализируется. Поэтому можно вызывать макрокоманду и с
невозможными датами, нпример 32-е апреля --- така дата будет отформатирована как 32-е апреля. Так что команду \cs{cuDate} можно
использовать для набора фраз вроде ``дата \verb+\cuDate{2016-04-22}+ не существует ни в одном календаре''.

Однако, если вы используете свой формат даты и в этом формате задействованы символические переменные \cs{cuDOW} (день недели) 
или \cs{cuYEARAM} (год от сотворения мира), то значения этих переменных будут вычислены исходя из даты --- и дата интерпретируется
как дата грегорианского календаря. Кроме того, невозможные даты будут нормализованы методом экстраполяции. Например, 32 апреля
будет интерпретировано как 2 мая для целей определения дня недели и года от сотворения мира.

Если ваш формат использует день недели (\cs{cuDOW}) или год от сотворения мира (\cs{cuYEARAM}) и вы указываете дату юлианского календаря,
вы должны вместо \cs{cuDate} пользоваться макрокомандой \cs{cuJulianDate} для правильной обработки дня недели и года от сотворения мира.

Лучше всего всегда использовать \cs{cuDate} для форматирования грегорианских дат и всегда использовать \cs{cuJulianDate} для
форматирования юлианских дат --- вне зависимости от значения текущего формата. Таким образом вы можете впоследствии изменить
формат даты (например, добавив в него день недели) и результат останется правильным.
\end{RU}

\begin{EN}
\subsection{\cs{cuDefineDateFormat}}
Command allows one to define date format. It does not change how \cs{cuDate} formats its output (for that, use \cs{cuUseDateFormat}).
Example:
\end{EN}

\begin{RU}
\subsection{\cs{cuDefineDateFormat}}
Команда определяет формат даты. Она никак не влияет на то как \cs{cuDate} форматирует свой вывод (для этого используется \cs{cuUseDateFormat}).
Пример:
\end{RU}

\begin{center}
\begin{churchslavonic}
\begin{tabular}{l}
\verb+\cuDefineDateFormat{long}{%+\\
\verb+  \cuDayName{\cuDOW},+\\
\verb+  \cuNum{\cuDAY}+_гѡ\verb+~%+\\
\verb+  \cuMonthName{\cuMONTH}~%+\\
\verb+  +лѣ́та ѿ сотворе́нїѧ мі́ра\verb+~%+\\
\verb+  \cuNum{\cuYEARAM}%+\\
\verb+}+\\
\end{tabular}
\end{churchslavonic}
\end{center}
%
\begin{EN}
defines a format with name \texttt{long}. If we use this format to print the same date as before, we will get:
\textchurchslavonic{\cuUseDateFormat{long}\cuDate{2016-04-22}}.
\end{EN}
%
\begin{RU}
определяет новый формат с именем \texttt{long}. Если мы напечатаем дату этим форматом, то получим:
\textchurchslavonic{\cuUseDateFormat{long}\cuDate{2016-04-22}}.
\end{RU}

\begin{EN}
Following symbolic names can be used when formatting the date:
\begin{itemize}
\item \cs{cuYEAR} --- year part of date (number, like \texttt{2016})
\item \cs{cuYEARAM}\footnotemark[1] --- year since world creation, aka Anno Mundi (number, like \texttt{7525})
\item \cs{cuMONTH} --- month part of date (number from 1 to 12)
\item \cs{cuDAY} --- day of the month
\item \cs{cuDOW}\footnotemark[1] --- day of the week (number from 0 to 6, where 0 means ``Sunday'')
\item \cs{cuINDICTION} --- indiction year (number from 1 to 15)
\end{itemize}
\footnotetext[1]{If your format uses this value, make sure that you format date with a correct macro: you must use
\cs{cuDate} if passed date is Gregorian, or \cs{cuJulianDate} if you pass Julian date.}
\end{EN}

\begin{RU}
При определении формата можно пользоваться следующими символическими именами:
\begin{itemize}
\item \cs{cuYEAR} --- год (число, например \texttt{2016})
\item \cs{cuYEARAM}\footnotemark[1] --- год от сотворения мира, Anno Mundi (число, например \texttt{7525}).
\item \cs{cuMONTH} --- месяц (число от 1 до 12)
\item \cs{cuDAY} --- день месяца
\item \cs{cuDOW}\footnotemark[1] --- день недели (число от 0 to 6, где 0 означает ``воскресение'')
\item \cs{cuINDICTION} --- индикт (число от 1 до 15)
\end{itemize}
\footnotetext[1]{Если ваш формат
    пользуется этим значением, вы должны форматировать дату правильной макрокомандой: \cs{cuDate} 
    если вы передаете дату грегорианского календаря, или \cs{cuJulianDate} если используется дата юлианского календаря}
\end{RU}

\begin{EN}
\subsection{\cs{cuUseDateFormat}}
This command sets the date format to be used by the subsequent \cs{cuDate} and \cs{cuJulianDate}.

\subsection{\cs{cuJulianDate}}
Formats date, just like \cs{cuDate} does, but argument is interpreted as a Julian calendar date, not a Gregorian calendar one.
This makes difference only if your format is using symbolic names \cs{cuDOW} and/or \cs{cuYEARAM}.

\subsection{\cs{cuMonthName}}
Command expands numeric argument (month number) into textual representation. It is typically used when defining date format.
For example, date format named \texttt{default} is defined as:
\end{EN}

\begin{RU}
\subsection{\cs{cuUseDateFormat}}
Макро устанавливает имя текущего формата даты. Этот формат будет использоваться при последующих вызовах макрокоманд
\cs{cuDate} и \cs{cuJulianDate}.

\subsection{\cs{cuJulianDate}}
Форматирует дату в соответствии с текущим форматом подобно команде \cs{cuDate}. Отличие заключается в том, что аргумент
интерпретируется как дата юлианского а не грегорианского календаря. Это имеет значение только если текущий формат даты
использует символические имена \cs{cuDOW} (день недели) или \cs{cuYEARAM} (год от сотворения мира).

\subsection{\cs{cuMonthName}}
Команда раскрывает числовой аргумент в текстовое представление месяца. Команда обычно используется при задании формата
даты. Например, формат с именем \texttt{default} определен так:
\end{RU}
%
\begin{center}
\begin{churchslavonic}
\begin{tabular}{l}
\verb+\cuDefineDateFormat{default}{%+\\
\verb+  \cuNum{\cuDAY}~\cuMonthName{\cuMONTH}%+\\
\verb+  ~+лѣ́та\verb+~\cuNum{\cuYEAR}%+\\
\verb+}%+\\
\end{tabular}
\end{churchslavonic}
\end{center}

\begin{EN}
\subsection{\cs{cuDayName}}
Expands numeric argument into a textual representation of the day of the week using nominative case.

\subsection{\cs{cuDayNameAccusative}}
Expands numeric argument into a textual representation of the day of the week using accusative case.

\subsection{\cs{cuToday}}
This macro expands to a triplet \texttt{YYYY-MM-DD}. Date is generated using Gregorian calendar.

\subsection{\cs{cuJulianToday}}
This macro expands to a triplet \texttt{YYYY-MM-DD}. Date is generated using Julian calendar.

It is a shortcut for \verb+\cuAsJulian{\cuToday}+.

\subsection{\cs{cuAsJulian}}
Converts Gregorian date to Julian date. Input and output use numeric triplet format \texttt{YYYY-MM-DD}.

Useful when the same date needs to be formatted as Gregorian and as Julian date.

\subsection{\cs{cuAsGegorian}}
Converts Julian date to Gregorian date. Input and output use numeric triplet format \texttt{YYYY-MM-DD}.

\end{EN}

\begin{RU}
\subsection{\cs{cuDayName}}
Команда раскрывает числовой аргумент в текстовое представление дня недели в именительном падеже.

\subsection{\cs{cuDayNameAccusative}}
Команда раскрывает числовой аргумент в текстовое представление дня недели в винительном падеже.

\subsection{\cs{cuToday}}
Эта макрокоманда раскрывается в текущую дату в виде триплета \texttt{YYYY-MM-DD}. Используется грегорианский календарь.

\subsection{\cs{cuJulianToday}}
Эта макрокоманда раскрывается в текущую дату в виде триплета \texttt{YYYY-MM-DD}. Используется юлианский календарь.

Команда просто ракрывается в:  \verb+\cuAsJulian{\cuToday}+.

\subsection{\cs{cuAsJulian}}
Преобразует грегорианскую дату в юлианскую. Дата задается и выводится как числовой триплет \texttt{YYYY-MM-DD}.

Команда полезна когда одну и ту же дату надо представить и в грегорианском и в юлианском календаре.

\subsection{\cs{cuAsGregorian}}
Преобразует юлианскую дату в грегорианскую. Дата задается и выводится как числовой триплет \texttt{YYYY-MM-DD}.

\end{RU}

\begin{EN}
\section{Kinovar}
Printed and hand-written Church Slavonic texts often use color to highlight sectional and paragraph structure. Typical style
would use red color to write section names, comments, marginal notes. First letter of each paragraph is also colored red.

\subsection{\cs{cuKinovar}}
Takes a single argument and prints it using red color. For example, explicitly specifying its argument one gets expected result:

\end{EN}

\begin{RU}
\section{Киноварь}
Печатные и рукописные книги на церковнославянском часто пользуются красным цветом для выделения структурных элементов текста.
Обычно заголовки, замечания и пометки на полях печатаются красным цветом. Кроме того, первая буква каждого параграфа тоже
выделяется красным цветом.

\subsection{\cs{cuKinovar}}
Команда печатает свой аргумент красным цветом. Например, если мы явно зададим текст аргумента, то получим ожидаемый результат:
\end{RU}

\begin{center}
\begin{churchslavonic}
\begin{tabular}[]{ | l | l | }
\hline
\verb+\cuKinovar{+ли́къ:\verb+}+ гдⷭ҇и поми́лꙋй. & \cuKinovar{ли́къ:} гдⷭ҇и поми́лꙋй. \\
\hline
\end{tabular}
\end{churchslavonic}
\end{center}

\begin{EN}
If one uses \TeX\ mechanism of implicit argument detection, then, red color will be used for the first character of the
text after this command. Non-trivial feature of this command is that it will also ``collect'' all diacritical marks that
belong to this first character, and thus all accents will also use the red color!
Use this command in the indirect parameter mode to paint red the first letter of each paragraph.\footnote{You can also experiment
with \TeX\ command \cs{everypar} to autoamte this, but the success or failure of this technique critically depends on the
\LaTeX\ class used and packages loaded. We found it very fragile and thus \pkg{churchslavonic} package does not offer
any automation for this. It may be easier and more robust use Search/Replace functionality embedded in any non-trivial text
editor to just automatically place \cs{cuKinovar} command before every paragraph of the source text.}
\end{EN}

\begin{RU}
Если же используется механизм \TeX{} неявного задания аргумента, то команда будет применена к первой букве последующего текста.
При этом команда ``соберет'' все необходимые выносные символы, так что все акценты первой буквы будут корректно раскрашены!
Поэтому очень удобно использовать эту команду с неявным заданием аргумента для раскраски первой буквы параграфа.\footnote{Вы также
можете поэкспериментировать со встроенной командой \TeX\ \cs{everypar} с целью полностью автоматизировать раскраску первой буквы
параграфа. Однако успех сильно зависит от того какой класс системы \LaTeX\ используется и от того какие пакеты подгружаются.
Мы не нашли надежного способа заставить \cs{everypar} работать и поэтому пакет \pkg{churchslavonic} не предлагает никаких
макрокоманд для дальнейшей автоматизации этого процесса. На практике, часто проще и надежнее воспользоваться функцией
текстового редактора Найти/Заменить для вставки макрокоманды \cs{cuKinovar} перед каждым параграфом.}
\end{RU}

\begin{center}
\begin{churchslavonic}
\begin{tabular}[]{ | l | l | }
\hline
\verb+\cuKinovar+ Пои́мъ гдⷭ҇ви пѣ́снь но́вꙋю & 
\cuKinovar Пои́мъ гдⷭ҇ви пѣ́снь но́вꙋю \\ 
\verb+\cuKinovar+ Ꙗ҆́кѡ тꙋ́ча на тро́скотъ & \cuKinovar Ꙗ҆́кѡ тꙋ́ча на тро́скотъ \\
\hline
\end{tabular}
\end{churchslavonic}
\end{center}

\begin{EN}

\subsection{\cs{cuKinovarColor}}
Switches current color to red. One would typically use this command inside a group that limits the scope of red text, unless
you want all subsequent text to be colored red.
\end{EN}

\begin{RU}

\subsection{\cs{cuKinovarColor}}
Команда переключает текущий цвет на красный. Должна использоваться внутри группы, которая ограничит ее действие (если вы не хотите
чтобы весь послеующий текст был напечатан красным цветом).
\end{RU}

\begin{EN}
\section{Utilities}
The mechanism that \cs{cuKinovar} macro is using to collect all accents (when argument is given implicitly) can be useful for
many other purposes. One example is to typeset a dropletter at the beginning of a chapter (this is often used in Church Slavonic
texts). For this purpose standard \LaTeX\ package \pkg{lettrine} works fine. The only nuisance is that one have to be careful to
pass to \cs{lettrine} not just the first letter, but also all diacritical marks for this letter. Naturally, we want to reuse the
clever mechanism that \cs{cuKinovar} is using to do the collection job.

Here is an example how to accomplish that:
\end{EN}

\begin{RU}
\section{Утилиты}
Механизм, используемый командой \cs{cuKinovar} для сбора выносных символов (при неявном задании аргумента), может оказаться полезен
в некоторых других случаях. Один из примеров --- это ``буквицы'' в начале разделов. Для набора буквицы отлично работает стандартный
пакет \pkg{lettrine}. Единственное неудобство --- это необходимость задавать явно первую букву вместе во всеми ее выносными символами.
Естественно желание упростить и автоматизировать эту работу задействовав тот же механизм что и в \cs{cuKinovar}.

Вот как можно добиться этого:
\end{RU}

\begin{center}
\begin{churchslavonic}
\begin{tabular}{l}
\verb+\def\cu@lettrine{\lettrine[lines=3,findent=0pt,nindent=0pt]}+\\
\verb+\def\cuLettrine{\cu@tokenizeletter\cu@lettrine}+\\
\verb+\renewcommand{\LettrineFontHook}{\cuKinovarColor}+\\
\end{tabular}
\end{churchslavonic}
\end{center}
%
\begin{EN}
Once this definition of \verb+\cuLettrine+ is created (put is somewhere in preamble, and do not forget to enclose in \cs{makeatletter} and \cs{makeatother}),
you can create drop capitals like this:
\end{EN}
%
\begin{RU}
Поместите это определение команды \verb+\cuLettrine+ в преамбулу вашего документа (и не забудьте окружить его командами \cs{makeatletter} и \cs{makeatother}).
После этого можно набирать буквицы так:
\end{RU}
%
\begin{center}
\begin{churchslavonic}
\begin{tabular}{l}
\verb+\cuLettrine+ И҆́же дх҃а си́ла въ не́мощи соверша́етсѧ\ldots\\
\end{tabular}
\end{churchslavonic}
\end{center}

\begin{churchslavonic}

\cuLettrine 
И҆́же дх҃а си́ла въ не́мощи соверша́етсѧ, ꙗ҆́коже пи́сано є҆́сть, и҆ вѣ́рꙋемъ: въ не́мощи же не тѣлесѐ то́чїю, но ᲂу҆́бѡ и҆ сло́ва, 
и҆ премꙋ́дрости на ѧ҆зы́цѣ лежа́ща. И҆ сѐ ꙗ҆́вѣ ѿ мно́гихъ ᲂу҆́бѡ и҆ны́хъ, па́че же ѿ и҆́же ѡ҆ вели́комъ бг҃осло́вѣ, и҆ бра́тѣ хрⷭ҇то́вѣ, 
благода́тїю зри́мѣмъ.

\end{churchslavonic}

\begin{thebibliography}{9}

\bibitem{UN41}
  Aleksandr Andreev, Yuri Shardt, and Nikita Simmons.
  \emph{Church Slavonic Typography in Unicode},
  Uncode Technical Note~41,
  \url{http://www.unicode.org/notes/tn41/}

\end{thebibliography}

\end{document}
